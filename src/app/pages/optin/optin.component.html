<form [formGroup]="myForm" novalidate (ngSubmit)="submit(i)">
  <div formArrayName="optin">
    <div *ngFor="let optin of myForm.controls.optin.controls; let i=index">
      <ba-card cardTitle="optin{{i + 1}}" baCardClass="with-scroll" [formGroupName]="i">
        <div class="row">
          <div class="form-group col-md-6">
            <label>Optin Message</label>
            <input type="text" class="form-control" ([ngModel])="formdata.optinName" formControlName="optinName" placeholder="Your offer message">
          </div>
          <div class="form-group col-md-6">
            <label>Optin Description</label>
            <input type="text" class="form-control" ([ngModel])="formdata.optinDescription" formControlName="optinDescription" placeholder="Tell us little bit about this offer">
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label>Optin Response</label>
            <input type="text"  id="optinURL" class="form-control" ([ngModel])="formdata.optinURL" formControlName="optinURL" placeholder="After subscription what should we tell your user?">

          </div>
          <div class="form-group col-md-6">
            <label>Pick your Email List</label>
            <tag-input [onlyFromAutocomplete]="true" secondaryPlaceholder ="Email List" placeholder="Email List" ([ngModel])="formdata.optinTag" formControlName="optinTag">
              <tag-input-dropdown [showDropdownIfEmpty]="true"
              [autocompleteObservable]="autocompleteItems">
              </tag-input-dropdown>
            </tag-input>
          </div>
        </div>
        <div>
          <button type="button" class="btn btn-success" [disabled]="myForm?.invalid" (click)="submit(i)">Save</button>
          <button type="button" class="btn btn-danger" *ngIf="myForm.controls.optin.controls.length > 1" (click)="removeAddress(i)">Delete Product</button>
        </div>
      </ba-card>
    </div>
  </div>
</form>
<div>
  <button type="button" class="btn btn-danger" (click)="addOptin()">Add New Optin</button>
</div>
